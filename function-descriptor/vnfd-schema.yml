---
  $schema: "http://json-schema.org/draft-04/schema#"
  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01"
  description: "The core schema for SONATA network function descriptors."
  type: "object"
  properties: 
    descriptor_version: 
      description: "The version of the description definition used to describe the function descriptor."
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/descriptor_version"
      type: "string"
      pattern: "^[A-Za-z0-9\\-_.]+$"
      ##
      ## Translations of the key to other descriptor format, such as TOSCA, ETSI NVF, and HOT
      ##
      tosca:
        name: "tosca_definitions_version"
        type: "string"
      etsi:
        name: "descriptor_version"
        type: null
      t-nova:
        name: "descriptor_version"
        type: "string"
      hot:
        name: "heat_template_version"
        type: "string"
    vnf_group:
      description: "The group id identifies the VNF descriptor uniquely across all function descriptors."
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_group"
      type: "string"
      pattern: "^[a-z0-9\\-_.]+$"
    vnf_name:
      description: "The name of the function description."
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_name"
      type: "string"
      pattern: "^[a-z0-9\\-_.]+$"
      ##
      ## Translations of the key to other descriptor format, such as TOSCA, ETSI NVF, and HOT
      ##
      tosca:
        name: "template_name"
        type: "string"
      etsi:
        name: "id"
        type: null
      t-nova:
        name: "name"
        type: "string"
    vnf_version:
      description: "The version of the service description."
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_version"
      type: "string"
      pattern: "^[0-9\\-_.]+$"
      ##
      ## Translations of the key to other descriptor format, such as TOSCA, ETSI NVF, and HOT
      ##
      tosca:
        name: "template_version"
        type: "string"
      etsi:
        name: "version"
        type: null
      t-nova:
        name: "version"
        type: "string"
    vnf_author:
      description: "The person or organization that created the VNF descriptor."
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_author"
      type: "string"
      ##
      ## Translations of the key to other descriptor format, such as TOSCA, ETSI NVF, and HOT
      ##
      tosca:
        name: "template_author"
        type: "string"
      etsi:
        name: "vendor"
        type: null
    vnf_description:
      description: "A longer description of the network function."
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_description"
      type: "string"
      ##
      ## Translations of the key to other descriptor format, such as TOSCA, ETSI NVF, and HOT
      ##
      tosca:
        name: "tosca_definitions_version"
        type: "string"
      t-nova:
        name: "descriptor_version"
        type: "string"
      hot:
        name: "description"
        type: "string"
    vdu: 
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu"
      type: "array"
      items: 
        id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0"
        type: "object"
        properties: 
          id: 
            description: "A unique identifier of this VDU within the scope of this VNF descriptor."
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/id"
            type: "string"
          vm_image: 
            description: "The reference to a virtual machine image."
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/vm_image"
            type: "string"
          vm_image_format: 
            description: "The format of the virtual machine image."
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/vm_image_format"
            enum:
              - "raw"
              - "vhd"
              - "vmdk"
              - "vdi"
              - "iso"
              - "qcow2"
              - "docker"
              - "ova"
              - "ovf"
              - "bare"
          vm_image_md5: 
            description: "An MD5 hash of the virtual machine image."
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/vm_image_md5"
            type: "string"
            pattern: "^[A-Fa-f0-9]{32}$"
          resource_requirements: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements"
            type: "object"
            properties: 
              hypervisor_parameters: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/hypervisor_parameters"
                type: "object"
                properties: 
                  version: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/hypervisor_parameters/version"
                    type: "string"
                  type: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/hypervisor_parameters/type"
                    type: "string"
                additionalProperties: false
              network_interface_card_capabilities: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/network_interface_card_capabilities"
                type: "object"
                properties: 
                  SR-IOV: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/network_interface_card_capabilities/SR-IOV"
                    type: "boolean"
                  mirroring: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/network_interface_card_capabilities/mirroring"
                    type: "boolean"
                additionalProperties: false
              network_interface_bandwidth: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/network_interface_bandwidth"
                type: "number"
                minimum: 0
                exclusiveMinimum: true
              network_interface_bandwidth_unit: 
                description: "The unit of the network interface bandwidth. Default is bps (bit per second)."
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/network_interface_bandwidth_unit"
                enum:
                  - "bps"  # Bit per second
                  - "kbps" # Kilobit per second
                  - "Mbps" # Megabit per second
                  - "Gbps" # Gigabit per second
                  - "Tbps" # Terabit per second
              memory: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/memory"
                type: "object"
                properties:
                  size:
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/memory/size"
                    type: "number"
                    minimum: 0
                    exclusiveMinimum: true
                  size_unit: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/memory/size_unit"
                    description: "The unit the host memory is measured in. Default is MB (Megabyte)"
                    enum:
                      - "B"   # Byte
                      - "kB"  # Kilobyte
                      - "KiB" # Kibityte
                      - "MB"  # Megabyte
                      - "MiB" # Mebibyte
                      - "GB"  # Gigabyte
                      - "GiB" # Gibibyte
                      - "TB"  # Terabyte
                      - "TiB" # Tebibyte
                      - "PT"  # Petabyte
                      - "PiT" # Pebibyte
                  large_pages_required: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/memory/large_pages_required"
                    type: "boolean"
                  numa_allocation_policy: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/memory/numa_allocation_policy"
                    type: "string"
                required:
                  - size
                additionalProperties: false
              storage: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/storage"
                type: "object"
                properties: 
                  size: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/storage/size"
                    type: "number"
                    minimum: 0
                    exclusiveMinimum: true
                  size_unit: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/storage/size_unit"
                    enum:
                      - "B"   # Byte
                      - "kB"  # Kilobyte
                      - "KiB" # Kibityte
                      - "MB"  # Megabyte
                      - "MiB" # Mebibyte
                      - "GB"  # Gigabyte
                      - "GiB" # Gibibyte
                      - "TB"  # Terabyte
                      - "TiB" # Tebibyte
                      - "PT"  # Petabyte
                      - "PiT" # Pebibyte
                  persistence: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/storage/persistence"
                    type: "boolean"
                required:
                  - size
                additionalProperties: false
              platform_pcie_parameters: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/platform_pcie_parameters"
                type: "object"
                properties: 
                  SR-IOV: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/platform_pcie_parameters/SR-IOV"
                    type: "boolean"
                  device_pass_through: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/platform_pcie_parameters/device_pass_through"
                    type: "boolean"
                additionalProperties: false
              cpu_support_accelerator: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/cpu_support_accelerator"
                type: "string"
              vcpus: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/vcpus"
                type: "integer"
                minimum: 0
                exclusiveMinimum: true
              vswitch_capabilities: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/vswitch_capabilities"
                type: "object"
                properties: 
                  version: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/vswitch_capabilities/version"
                    type: "string"
                  type: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/vswitch_capabilities/type"
                    type: "string"
                  overlay_tunnel: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/vswitch_capabilities/overlay_tunnel"
                    type: "string"
                additionalProperties: false
              data_processing_acceleration_library: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/resource_requirements/data_processing_acceleration_library"
                type: "string"
            required:
              - memory
              - vcpus
            additionalProperties: false
          networking_resources: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/networking_resources"
            type: "string"
          connection_points: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/connection_points"
            type: "array"
            items: 
              id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/connection_points/0"
              type: "object"
              properties: 
                vlink_ref: 
                  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/connection_points/0/vlink_ref"
                  type: "string"
                id: 
                  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/connection_points/0/id"
                  type: "string"
              additionalProperties: false
          monitoring_parameters: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/monitoring_parameters"
            type: "array"
            items: 
              id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/monitoring_parameters/0"
              type: "string"
          scale_in_out: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/scale_in_out"
            type: "object"
            properties: 
              minimum: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/scale_in_out/minimum"
                type: "integer"
              maximum: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vdu/0/scale_in_out/maximum"
                type: "integer"
            additionalProperties: false
        required:
          - id
          - resource_requirements
        additionalProperties: false
      minItems: 1
      uniqueItems: true
    vlinks: 
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks"
      type: "array"
      items: 
        id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1"
        type: "object"
        properties: 
          leaf_requirement: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/leaf_requirement"
            type: "string"
          connectivity_type: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/connectivity_type"
            type: "string"
          vdu_reference: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/vdu_reference"
            type: "array"
            items: 
              id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/vdu_reference/0"
              type: "string"
          external_access: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/external_access"
            type: "boolean"
          connection_points_reference: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/connection_points_reference"
            type: "array"
            items: 
              id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/connection_points_reference/1"
              type: "string"
          access: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/access"
            type: "boolean"
          alias: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/alias"
            type: "string"
          root_requirement: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/root_requirement"
            type: "string"
          dhcp: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/dhcp"
            type: "boolean"
          id: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/id"
            type: "string"
          qos: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vlinks/1/qos"
            type: "string"
        additionalProperties: false
    deployment_flavours: 
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours"
      type: "array"
      items: 
        id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0"
        type: "object"
        properties: 
          vdu_reference: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/vdu_reference"
            type: "array"
            items: 
              id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/vdu_reference/0"
              type: "string"
          constraint: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/constraint"
            type: "string"
          flavour_key: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/flavour_key"
            type: "string"
          vlink_reference: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/vlink_reference"
            type: "array"
            items: 
              id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/vlink_reference/1"
              type: "string"
          id: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/id"
            type: "string"
          assurance_parameters: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters"
            type: "array"
            items: 
              id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0"
              type: "object"
              properties: 
                violation: 
                  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/violation"
                  type: "array"
                  items: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/violation/0"
                    type: "object"
                    properties: 
                      interval: 
                        id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/violation/0/interval"
                        type: "integer"
                      breaches_count: 
                        id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/violation/0/breaches_count"
                        type: "integer"
                    additionalProperties: false
                value: 
                  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/value"
                  type: "integer"
                penalty: 
                  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/penalty"
                  type: "object"
                  properties: 
                    type: 
                      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/penalty/type"
                      type: "string"
                    expression: 
                      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/penalty/expression"
                      type: "integer"
                    validity: 
                      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/penalty/validity"
                      type: "string"
                    unit: 
                      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/penalty/unit"
                      type: "string"
                  additionalProperties: false
                formula: 
                  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/formula"
                  type: "string"
                rel_id: 
                  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/rel_id"
                  type: "string"
                id: 
                  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/id"
                  type: "string"
                unit: 
                  id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/deployment_flavours/0/assurance_parameters/0/unit"
                  type: "string"
              additionalProperties: false
        additionalProperties: false
    vnf_lifecycle_events: 
      id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events"
      type: "array"
      items: 
        id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0"
        type: "object"
        properties: 
          authentication_username: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/authentication_username"
            type: "string"
          driver: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/driver"
            type: "string"
          authentication_type: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/authentication_type"
            type: "string"
          authentication: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/authentication"
            type: "string"
          vnf_container: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/vnf_container"
            type: "string"
          events: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events"
            type: "object"
            properties: 
              start: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/start"
                type: "object"
                properties: 
                  command: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/start/command"
                    type: "string"
                  template_file_format: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/start/template_file_format"
                    type: "string"
                  template_file: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/start/template_file"
                    type: "string"
                additionalProperties: false
              stop: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop"
                type: "object"
                properties: 
                  command: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/command"
                    type: "string"
                  template_file: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/template_file"
                    type: "string"
                  template_file_format: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/template_file_format"
                    type: "string"
                additionalProperties: false
              restart: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop"
                type: "object"
                properties: 
                  command: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/command"
                    type: "string"
                  template_file: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/template_file"
                    type: "string"
                  template_file_format: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/template_file_format"
                    type: "string"
                additionalProperties: false
              scale-in: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop"
                type: "object"
                properties: 
                  command: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/command"
                    type: "string"
                  template_file: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/template_file"
                    type: "string"
                  template_file_format: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/template_file_format"
                    type: "string"
                additionalProperties: false
              scale-out: 
                id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop"
                type: "object"
                properties: 
                  command: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/command"
                    type: "string"
                  template_file: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/template_file"
                    type: "string"
                  template_file_format: 
                    id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/events/stop/template_file_format"
                    type: "string"
                additionalProperties: false
            additionalProperties: false
          flavor_id_ref: 
            id: "http://www.sonata-nfv.eu/schema/vnfd-schema-01/vnf_lifecycle_events/0/flavor_id_ref"
            type: "string"
        additionalProperties: false
  required:
    - descriptor_version
    - vnf_group
    - vnf_name
    - vnf_version
    - vdu
  additionalProperties: false
