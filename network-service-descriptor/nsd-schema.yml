---
  $schema: "http://json-schema.org/draft-04/schema#"
  id: "http://www.sonata-nfv.eu/schema/nsd-schema-02-recursive"
  description: "The core scheme for RECUSRIVE service descriptors (many details left out)"
  type: "object"
  properties:
    nsd:
      id: "/nsd"
      type: "object"
      properties: 
        id: 
          id: "/nsd/id"
          type: "string"
        name: 
          id: "/nsd/name"
          type: "string"
        vendor: 
          id: "/nsd/vendor"
          type: "string"
        version: 
          id: "/nsd/version"
          type: "string"
        manifest_file_md5: 
          id: "/nsd/manifest_file_md5"
          type: "string"
        vnfds: 
          id: "/nsd/vnfds"
          type: "array"
          items: 
            type: "string"
          minItems: 0
          uniqueItems: true
        nsds:
          id: "/nsd/nsds"
          type: "array"
          items: 
            type: "string"
          minItems: 0
          uniqueItems: true
          # how do I write down that there must be at least one of VNFDs or NSDs?
        fgd:
          # the forwarding graph is more generic, it can be services or functions
          id: "/nsd/fgd/id"
          type: "string"
            vendor: 
              id: "/nsd/fgd/vendor"
              type: "string"
            version: 
              id: "/nsd/fgd/version"
              type: "string"
            ns_version: 
              id: "/nsd/fgd/ns_version"
              type: "string"
            manifest_file_md5: 
              id: "/nsd/fgd/manifest_file_md5"
              type: "string"
            vnffgs: 
              id: "/nsd/fgd/vnffgs"
              type: "array"
              items: 
                id: "/nsd/fgd/vnffgs/0"
                type: "object"
                properties: 
                  fg_id: 
                    id: "/nsd/fgd/fgs/0/fg_id"
                    type: "string"
                  number_of_endpoints: 
                    id: "/nsd/fgd/fgs/0/number_of_endpoints"
                    type: "integer"
                  number_of_virtual_links: 
                    id: "/nsd/fgd/fgs/0/number_of_virtual_links"
                    type: "integer"
                  depedent_virtual_links: 
                    id: "/nsd/fgd/fgs/0/depedent_virtual_links"
                    type: "array"
                    items: 
                      - 
                        id: "/nsd/fgd/fgs/0/depedent_virtual_links/0"
                        type: "string"
                      - 
                        id: "/nsd/fgd/fgs/0/depedent_virtual_links/1"
                        type: "string"
                      - 
                        id: "/nsd/fgd/vnffgs/0/depedent_virtual_links/2"
                        type: "string"
                  network_forwarding_path: 
                    id: "/nsd/fgd/fgs/0/network_forwarding_path"
                    type: "array"
                    items: 
                      id: "/nsd/fgd/fgs/0/network_forwarding_path/0"
                      type: "object"
                      properties: 
                        nfp_id: 
                          id: "/nsd/fgd/fgs/0/network_forwarding_path/0/nfp_id"
                          type: "string"
                        graph: 
                          id: "/nsd/fgd/fgs/0/network_forwarding_path/0/graph"
                          type: "array"
                          items: 
                            - 
                              id: "/nsd/fgd/fgs/0/network_forwarding_path/0/graph/0"
                              type: "string"
                            - 
                              id: "/nsd/fgd/fgs/0/network_forwarding_path/0/graph/1"
                              type: "string"
                        connection_points: 
                          id: "/nsd/fgd/fgs/0/network_forwarding_path/0/connection_points"
                          type: "array"
                          items: 
                            - 
                              id: "/nsd/fgd/fgs/0/network_forwarding_path/0/connection_points/0"
                              type: "string"
                            - 
                              id: "/nsd/fgd/vnffgs/0/network_forwarding_path/0/connection_points/1"
                              type: "string"
                        constituent_vnfs: 
                          id: "/nsd/fgd/fgs/0/network_forwarding_path/0/constituent_vnfs"
                          type: "array"
                          items: 
                            id: "/nsd/fgd/fgs/0/network_forwarding_path/0/constituent_vnfs/0"
                            type: "string"
                        constituent_services: 
                          id: "/nsd/fgd/fgs/0/network_forwarding_path/0/constituent_services"
                          type: "array"
                          items: 
                            id: "/nsd/fgd/fgs/0/network_forwarding_path/0/constituent_services/0"
                            type: "string"
        lifecycle_events: 
          id: "/nsd/lifecycle_events"
          type: "object"
          properties: 
            start: 
              id: "/nsd/lifecycle_events/start"
              type: "array"
              items: 
                id: "/nsd/lifecycle_events/start/0"
                type: "object"
                properties: 
                  vnf_id: 
                    id: "/nsd/lifecycle_events/start/0/vnf_id"
                    type: "string"
                  vnf_event: 
                    id: "/nsd/lifecycle_events/start/0/vnf_event"
                    type: "string"
            stop: 
              id: "/nsd/lifecycle_events/stop"
              type: "array"
              items: 
                id: "/nsd/lifecycle_events/stop/0"
                type: "object"
                properties: 
                  vnf_id: 
                    id: "/nsd/lifecycle_events/stop/0/vnf_id"
                    type: "string"
                  vnf_event: 
                    id: "/nsd/lifecycle_events/stop/0/vnf_event"
                    type: "string"
            scale_out: 
              id: "/nsd/lifecycle_events/scale_out"
              type: "array"
              items: 
                id: "/nsd/lifecycle_events/scale_out/0"
                type: "object"
                properties: 
                  vnf_id: 
                    id: "/nsd/lifecycle_events/scale_out/0/vnf_id"
                    type: "string"
                  vnf_event: 
                    id: "/nsd/lifecycle_events/scale_out/0/vnf_event"
                    type: "string"
        vnf_depedency: 
          id: "/nsd/vnf_depedency"
          type: "array"
          items: 
            type: "string"
          minItems: 0
          uniqueItems: true
        services_depedency: 
          id: "/nsd/services_depedency"
          type: "array"
          items: 
            type: "string"
          minItems: 0
          uniqueItems: true
        monitoring_parameters: 
          id: "/nsd/monitoring_parameters"
          type: "array"
          items: 
            - 
              id: "/nsd/monitoring_parameters/0"
              type: "object"
              properties: 
                desc: 
                  id: "/nsd/monitoring_parameters/0/desc"
                  type: "string"
                metric: 
                  id: "/nsd/monitoring_parameters/0/metric"
                  type: "string"
                unit: 
                  id: "/nsd/monitoring_parameters/0/unit"
                  type: "string"
            - 
              id: "/nsd/monitoring_parameters/1"
              type: "object"
              properties: 
                desc: 
                  id: "/nsd/monitoring_parameters/1/desc"
                  type: "string"
                metric: 
                  id: "/nsd/monitoring_parameters/1/metric"
                  type: "string"
                unit: 
                  id: "/nsd/monitoring_parameters/1/unit"
                  type: "string"
        vld: 
          id: "/nsd/vld"
          type: "object"
          properties: 
            id: 
              id: "/nsd/vld/id"
              type: "string"
            vendor: 
              id: "/nsd/vld/vendor"
              type: "string"
            descriptor_version: 
              id: "/nsd/vld/descriptor_version"
              type: "string"
            manifest_file_md5: 
              id: "/nsd/vld/manifest_file_md5"
              type: "string"
            number_of_endpoints: 
              id: "/nsd/vld/number_of_endpoints"
              type: "integer"
            virtual_links: 
              id: "/nsd/vld/vitual_links"
              type: "array"
              items: 
                - 
                  id: "/nsd/vld/vitual_links/0"
                  type: "object"
                  properties: 
                    vld_id: 
                      id: "/nsd/vld/vitual_links/0/vld_id"
                      type: "string"
                    root_requirements: 
                      id: "/nsd/vld/vitual_links/0/root_requirements"
                      type: "string"
                    leaf_requirements: 
                      id: "/nsd/vld/vitual_links/0/leaf_requirements"
                      type: "string"
                    qos: 
                      id: "/nsd/vld/vitual_links/0/qos"
                      type: "object"
                      properties: 
                        none: 
                          id: "/nsd/vld/vitual_links/0/qos/none"
                          type: "string"
                    test_access: 
                      id: "/nsd/vld/vitual_links/0/test_access"
                      type: "string"
                    connections: 
                      id: "/nsd/vld/vitual_links/0/connections"
                      type: "array"
                      items: 
                        - 
                          id: "/nsd/vld/vitual_links/0/connections/0"
                          type: "string"
                        - 
                          id: "/nsd/vld/vitual_links/0/connections/1"
                          type: "string"
                    connectivity_type: 
                      id: "/nsd/vld/vitual_links/0/connectivity_type"
                      type: "string"
        sla: 
          id: "/nsd/sla"
          type: "array"
          items: 
            id: "/nsd/sla/0"
            type: "object"
            properties: 
              id: 
                id: "/nsd/sla/0/id"
                type: "string"
              flavor_key: 
                id: "/nsd/sla/0/flavor_key"
                type: "string"
              assurance_parameters: 
                id: "/nsd/sla/0/assurance_parameters"
                type: "array"
                items: 
                  id: "/nsd/sla/0/assurance_parameters/0"
                  type: "object"
                  properties: 
                    formula: 
                      id: "/nsd/sla/0/assurance_parameters/0/formula"
                      type: "string"
                    id: 
                      id: "/nsd/sla/0/assurance_parameters/0/id"
                      type: "string"
                    name: 
                      id: "/nsd/sla/0/assurance_parameters/0/name"
                      type: "string"
                    penalty: 
                      id: "/nsd/sla/0/assurance_parameters/0/penalty"
                      type: "object"
                      properties: 
                        type: 
                          id: "/nsd/sla/0/assurance_parameters/0/penalty/type"
                          type: "string"
                        unit: 
                          id: "/nsd/sla/0/assurance_parameters/0/penalty/unit"
                          type: "string"
                        validity: 
                          id: "/nsd/sla/0/assurance_parameters/0/penalty/validity"
                          type: "string"
                        value: 
                          id: "/nsd/sla/0/assurance_parameters/0/penalty/value"
                          type: "integer"
                    unit: 
                      id: "/nsd/sla/0/assurance_parameters/0/unit"
                      type: "string"
                    value: 
                      id: "/nsd/sla/0/assurance_parameters/0/value"
                      type: "string"
                    violations: 
                      id: "/nsd/sla/0/assurance_parameters/0/violations"
                      type: "array"
                      items: 
                        id: "/nsd/sla/0/assurance_parameters/0/violations/0"
                        type: "object"
                        properties: 
                          breaches_count: 
                            id: "/nsd/sla/0/assurance_parameters/0/violations/0/breaches_count"
                            type: "integer"
                          interval: 
                            id: "/nsd/sla/0/assurance_parameters/0/violations/0/interval"
                            type: "integer"
              billing: 
                id: "/nsd/sla/0/billing"
                type: "object"
                properties: 
                  model: 
                    id: "/nsd/sla/0/billing/model"
                    type: "string"
                  price: 
                    id: "/nsd/sla/0/billing/price"
                    type: "object"
                    properties: 
                      price_per_period: 
                        id: "/nsd/sla/0/billing/price/price_per_period"
                        type: "integer"
                      setup: 
                        id: "/nsd/sla/0/billing/price/setup"
                        type: "integer"
                      unit: 
                        id: "/nsd/sla/0/billing/price/unit"
                        type: "string"
              constituent_vnf: 
                id: "/nsd/sla/0/constituent_vnf"
                type: "array"
                items: 
                  id: "/nsd/sla/0/constituent_vnf/0"
                  type: "object"
                  properties: 
                    number_of_instances: 
                      id: "/nsd/sla/0/constituent_vnf/0/number_of_instances"
                      type: "integer"
                    redundancy_model: 
                      id: "/nsd/sla/0/constituent_vnf/0/redundancy_model"
                      type: "string"
                    vnf_flavour_id_reference: 
                      id: "/nsd/sla/0/constituent_vnf/0/vnf_flavour_id_reference"
                      type: "string"
                    vnf_reference: 
                      id: "/nsd/sla/0/constituent_vnf/0/vnf_reference"
                      type: "integer"
              constituent_services: 
                id: "/nsd/sla/0/constituent_service"
                type: "array"
                items: 
                  id: "/nsd/sla/0/constituent_service/0"
                  type: "object"
                  properties: 
                    number_of_instances: 
                      id: "/nsd/sla/0/constituent_service/0/number_of_instances"
                      type: "integer"
                    redundancy_model: 
                      id: "/nsd/sla/0/constituent_service/0/redundancy_model"
                      type: "string"
                    service_flavour_id_reference: 
                      id: "/nsd/sla/0/constituent_service/0/service_flavour_id_reference"
                      type: "string"
                    service_reference: 
                      id: "/nsd/sla/0/constituent_service/0/service_reference"
                      type: "integer"
        auto_scale_policy: 
          id: "/nsd/auto_scale_policy"
          type: "object"
          properties: 
            criteria: 
              id: "/nsd/auto_scale_policy/criteria"
              type: "array"
              items: 
                - 
                  id: "/nsd/auto_scale_policy/criteria/0"
                  type: "object"
                  properties: 
                    end-to-end bandwidth: 
                      id: "/nsd/auto_scale_policy/criteria/0/end-to-end bandwidth"
                      type: "string"
                - 
                  id: "/nsd/auto_scale_policy/criteria/1"
                  type: "object"
                  properties: 
                    test: 
                      id: "/nsd/auto_scale_policy/criteria/1/test"
                      type: "string"
            action: 
              id: "/nsd/auto_scale_policy/action"
              type: "string"
        connection_points: 
          id: "/nsd/connection_points"
          type: "array"
          items: 
            - 
              id: "/nsd/connection_points/0"
              type: "object"
              properties: 
                connection_point_id: 
                  id: "/nsd/connection_points/0/connection_point_id"
                  type: "string"
                type: 
                  id: "/nsd/connection_points/0/type"
                  type: "string"
            - 
              id: "/nsd/connection_points/1"
              type: "object"
              properties: 
                connection_point_id: 
                  id: "/nsd/connection_points/1/connection_point_id"
                  type: "string"
                type: 
                  id: "/nsd/connection_points/1/type"
                  type: "string"
            - 
              id: "/nsd/connection_points/2"
              type: "object"
              properties: 
                connection_point_id: 
                  id: "/nsd/connection_points/2/connection_point_id"
                  type: "string"
                type: 
                  id: "/nsd/connection_points/2/type"
                  type: "string"
      required: 
        - "id"
        - "name"
        - "vendor"
        - "version"
        - "vnfds"
        - "vnffgd"
        - "lifecycle_events"
        - "vnf_depedency"
        - "monitoring_parameters"
        - "vld"
        - "sla"
        - "auto_scale_policy"
        - "connection_points"
  required: 
    - "nsd"
          
